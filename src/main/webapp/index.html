<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Blog</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
<div id="posts"></div>
<hr/>
<form id="addPost">
    <label for="title">Title</label>
    <br/>
    <input type="text" name="title" id="title"/>
    <br/>
    <label for="content">Content</label>
    <br/>
    <textarea name="content" id="content"></textarea>
    <br/>
    <input type="button" id="add" value="Add"/>
</form>
<script type="text/javascript">
    function loadPosts(data)
    {
        var posts = jQuery("#posts");
        posts.empty();
        for (var i = 0; i < data.length; i++) {
            var post = jQuery("<div class='post'></div>");
            post.append("<h1>" + data[i].title + "</h1>");
            post.append("<div>" + data[i].content + "</div>");
            posts.append(post);
        }
    }
    function reloadPosts()
    {
        jQuery.ajax("api/post/list?responseType=application/json-in-script&methodName=loadPosts", {complete:function (xhr, status)
        {
            if (status != "error") {
                eval(xhr.responseText);
            }
        }});
    }//    Setup
    jQuery(function ()
    {
        var form = jQuery("form#addPost");
        jQuery("#add", form).click(function ()
        {
            var title = jQuery("#title", form).val();
            var content = jQuery("#content", form).val();
            jQuery.ajax("api/post/add", {complete:reloadPosts, data:{title:title, content:content}});
        });
    });
</script>
<script type="text/javascript" src="api/post/list?responseType=application/json-in-script&methodName=loadPosts"></script>
</body>
</html>